on:
  push:
    branches: [master]

name: ðŸš€ Deploy with Fito
jobs:
  deploy:
    name: ðŸŽ‰ Deploy
    runs-on: ubuntu-latest
    concurrency:
      group: ${{ github.workflow }}-${{ github.ref }}
      cancel-in-progress: false
    steps:
      - name: ðŸšš Get latest code
        uses: actions/checkout@master
        with:
          fetch-depth: 0

      - name: GO!
        uses: dimaslz/fito-deploy-action@beta
        with:
          server_ip: ${{ secrets.FITO_ENV_CONNECTION_HOST }}
          user: ${{ secrets.FITO_ENV_CONNECTION_USER }}
          ssh_private_key: ${{ secrets.FITO_ENV_CONNECTION_PRIVATE_KEY }}
          app_host: dimaslz.dev
          app_name: node-api
          static: false
          app_ports: 4000
          dockerfile: ./b.Dockerfile
          env: |
            NODE_ENV=production
            DUMMY=DUMMY DEMO TEXT
            PORT=4000
            
